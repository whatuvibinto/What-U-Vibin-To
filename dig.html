<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DIG - WHAT U VIBIN TO?</title>
    <link rel="stylesheet" href="css/style_index.css">
    <link rel="stylesheet" href="css/style_dig.css">
</head>
<body class="dig-page">

<div class="marquee-wrapper">
    <div class="marquee-content">
        WHAT U VIBIN TO? /// LOVE IS FREE /// WHAT U VIBIN TO? /// KEEP DIGGING /// WHAT U VIBIN TO? /// LOVE IS FREE ///
    </div>
</div>

<div class="container">
    <div class="header-logo-wrapper dig-logo">
        <a href="index.html">
            <img src="images/logo.svg" alt="WHAT U VIBIN TO?">
        </a>
    </div>

    <div class="dig-content">
        <div class="search-area">
            <input type="text" class="search-input" id="searchInput" placeholder="SEARCH WHO U LIKE...">
            <button class="search-btn">→</button>
        </div>

        <div class="profile-list" id="profileContainer">
            </div>

    </div>

    <div class="footer">
        KEEP DIGGING, KEEP VIBING.
    </div>
</div>

<script src="js/dig_data.js"></script>
<script>
    // データをもとにHTMLを生成するスクリプト
    const container = document.getElementById('profileContainer');
    
    function renderProfiles(data) {
        let html = '';
        data.forEach((person, index) => {
            // ジャンルタグを生成
            const tags = person.genre.map(g => `<span class="tag">${g}</span>`).join('');
            
            // アニメーションを少しずつ遅らせる(delay)
            const delay = index * 0.1; 

            // カードのHTMLテンプレート
            html += `
            <div class="profile-card" style="animation-delay: ${delay}s">
                <div class="profile-img">
                    <img src="${person.image}" alt="${person.name}">
                </div>
                <div class="profile-info">
                    <div>
                        <h2 class="profile-name">${person.name}<span class="profile-loc">/ ${person.location}</span></h2>
                        <p class="profile-genre">GENRE: ${tags}</p>
                    </div>
                    <div class="profile-qr">
                        <img src="${person.qr}" alt="QR Code">
                        <span class="qr-text">SCAN TO LISTEN</span>
                    </div>
                </div>
            </div>
            `;
        });
        container.innerHTML = html;
    }

    // 初回表示
    renderProfiles(digData);

    // (オマケ) 検索機能
    const searchInput = document.getElementById('searchInput');
    searchInput.addEventListener('input', (e) => {
        const term = e.target.value.toLowerCase();
        // 名前か場所に検索ワードが含まれている人だけ抽出
        const filtered = digData.filter(person => 
            person.name.toLowerCase().includes(term) || 
            person.location.toLowerCase().includes(term) ||
            person.genre.some(g => g.toLowerCase().includes(term))
        );
        renderProfiles(filtered);
    });
</script>

</body>
</html>
